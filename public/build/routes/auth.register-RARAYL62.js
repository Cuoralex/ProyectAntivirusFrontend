import{a as m}from"/build/_shared/chunk-2AMU242R.js";import{a as L}from"/build/_shared/chunk-5VJRENMX.js";import{k as b,q as p}from"/build/_shared/chunk-GSPLIXRC.js";import{a as w,b as d}from"/build/_shared/chunk-F33EF4G7.js";import{d as n}from"/build/_shared/chunk-2QEWK57A.js";var r=n(w(),1);var t=n(d(),1);function g(){let l=p(),u=m(s=>s.setRegistrationSuccess),[e,C]=(0,r.useState)({fullname:"",email:"",phone:"",birthdate:"",password:"",confirm_password:""}),[f,E]=(0,r.useState)(!1),[N,D]=(0,r.useState)(null),[S,F]=(0,r.useState)(null),[P,R]=(0,r.useState)(null),[h,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{let s=e.fullname.trim()!==""&&e.email.trim()!==""&&e.phone.length===10&&e.birthdate.trim()!==""&&e.password.length>=6&&e.confirm_password.trim()!=="",o=e.password===e.confirm_password;D(!o&&e.confirm_password.length>0?"Las contrase\xF1as no coinciden":null),F(e.phone.length>0&&e.phone.length!==10?"El n\xFAmero debe contener 10 d\xEDgitos.":null),R(e.password.length>0&&e.password.length<6?"La contrase\xF1a debe tener al menos 6 caracteres.":null),E(s&&o)},[e]);let i=s=>{let{name:o,value:a}=s.target;C(B=>({...B,[o]:o==="phone"?a.replace(/\D/g,""):a})),o==="email"&&c(null),o==="email"&&c(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)?null:"Ingresa un correo v\xE1lido")},A=async s=>{if(s.preventDefault(),!f)return;let o={fullName:e.fullname,email:e.email,phone:e.phone,password:e.password,confirmPassword:e.confirm_password,birthdate:new Date(e.birthdate).toISOString().split("T")[0]};try{let a=await fetch("/auth",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)});if(!a.ok){a.status===409?c("El correo ya est\xE1 registrado."):c(null);return}c(null),u(!0)}catch(a){console.error("Error al registrar:",a)}};return(0,t.jsxs)(b,{method:"post",action:"/auth/register",className:"flex flex-col items-center text-gray-500 w-full h-full px-12 gap-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-start w-full relative",children:[(0,t.jsx)("input",{type:"text",name:"fullname",placeholder:"Nombre completo",autoComplete:"name",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.fullname,onChange:i}),(0,t.jsx)("p",{className:"text-red-500 absolute top-9 text-[10px] md:top-8 md:text-base",children:l?.fieldErrors?.fullname||""})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start w-full relative",children:[(0,t.jsx)("input",{type:"email",name:"email",placeholder:"Correo",autoComplete:"email",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.email,onChange:i}),h&&(0,t.jsx)("p",{className:"text-red-500 absolute top-9 text-[10px] md:top-8 md:text-base",children:h})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start w-full relative",children:[(0,t.jsx)("input",{type:"tel",name:"phone",inputMode:"numeric",placeholder:"Celular",autoComplete:"tel",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.phone,onChange:i}),(0,t.jsx)("p",{className:"text-red-500 absolute top-9 text-[10px] md:top-8 md:text-base",children:S})]}),(0,t.jsx)("div",{className:"flex flex-col items-start w-full relative",children:(0,t.jsx)("input",{type:"date",name:"birthdate",autoComplete:"bday-day",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.birthdate,onChange:i,style:{color:"#333"}})}),(0,t.jsxs)("div",{className:"flex flex-col items-start w-full relative",children:[(0,t.jsx)("input",{type:"password",name:"password",placeholder:"Contrase\xF1a",autoComplete:"new-password",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.password,onChange:i}),(0,t.jsx)("p",{className:"text-red-500 absolute top-9 text-[10px] md:top-8 md:text-base",children:l?.fieldErrors?.password||P||""})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start w-full relative",children:[(0,t.jsx)("input",{type:"password",name:"confirm_password",placeholder:"Confirme contrase\xF1a",autoComplete:"new-password",className:`outline-none rounded-lg bg-white border border-gray-400 px-3 py-1 w-full \r
             appearance-auto focus:outline-none focus:ring-2 focus:ring-[#7C78B3] \r
             text-gray-700 placeholder-gray-500`,value:e.confirm_password,onChange:i}),(0,t.jsx)("p",{className:"text-red-500 absolute top-9 text-[10px] md:top-8 md:text-base",children:N||l?.fieldErrors?.confirmPassword||""})]}),(0,t.jsx)("button",{type:"button",onClick:A,className:`px-4 py-2 rounded-lg w-full ${f?"bg-[#7C78B3] text-white":"bg-gray-400 text-gray-700 cursor-not-allowed"}`,disabled:!f,children:"Enviar"})]})}var _=n(L(),1);var x=n(w(),1);var v=n(d(),1);function y(){let l=p(),u=m(e=>e.setRegistrationSuccess);return(0,x.useEffect)(()=>{l?.success&&u(!0)},[l,u]),(0,v.jsx)(g,{})}export{y as default};
